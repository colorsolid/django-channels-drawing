{% extends 'foli/base.html' %}

{% load static %}

{% block title %}Labs > 3D Printer{% endblock %}

{% block head_extend %}
  <link rel="stylesheet" type="text/css" href="{% static 'css/printer.css' %}">
{% endblock %}

{% block content %}
  {% include 'foli/nav.html' %}
  <div class="row border-top border-secondary">
    <div class="col-xl-1 col-md-0"></div>
    <div class="col-xl-5 col-md-12 order-xl-2 order-md-1 order-sm-1 order-1 mt-2">
      <div class="position-relative text-light" id="webcam">
        <img alt="Video offline" src="https://bitfall.io/webcam/?action=stream" class="w-100">
        <div id="connections" data-default="0"></div>
      </div>
    </div>
    <div class="col-xl-4 col-md-12 order-xl-1 order-md-2 order-sm-2 order-2 mt-2">
      <table class="table table-striped table-dark">
        <tbody>
          <tr>
            <th>Printer status:</th>
            <td id="printer-status" data-default="Offline"></td>
          </tr>
          <tr>
            <th>File name:</th>
            <td id="file-name" data-default="No file loaded"></td>
          </tr>
          <tr>
            <th>Progress:</th>
            <td id="progress" data-default="0" data-func="update_progress">
              <div id="progress-bar-outline"></div>
              <div id="progress-bar"></div>
              <div id="progress-percentage"></div>
            </td>
          </tr>
          <tr>
            <th>File size:</th>
            <td>
              <span id="file-pos" data-default="0" data-func="set_size"></span> /
              <span id="file-size" data-default="0" data-func="set_size"></span>
            </td>
          </tr>
          <tr>
            <th>Elapsed time:</th>
            <td id="elapsed-time" data-default="0" data-func="set_time"></td>
          </tr>
          <tr>
            <th>Estimated time:</th>
            <td id="estimated-time" data-default="0" data-func="set_time"></td>
          </tr>
          <tr>
            <th>Extruder Temp:</th>
            <td id="e-temp" data-default="0" data-func="set_temp"></td>
          </tr>
          <tr>
            <th>Bed Temp:</th>
            <td id="b-temp" data-default="0" data-func="set_temp"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="{% static 'js/socket.js' %}" type="text/javascript"></script>
  <script src="{% static 'js/printer.js' %}" type="text/javascript"></script>
{% endblock %}
